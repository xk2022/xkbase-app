import{s as o,h as _}from"./index-BdFDZIEO.js";const d=E=>{var n;return{id:E.id,code:E.code,name:E.name,description:E.description,enabled:E.enabled,permissionCodes:E.permissionCodes??[],permissionCount:((n=E.permissionCodes)==null?void 0:n.length)??0}},t=[{id:"1",code:"ADMIN",name:"系統管理員",description:"擁有系統所有權限的管理員角色",enabled:!0,permissionCodes:["UPMS_USER_VIEW","UPMS_USER_CREATE","UPMS_USER_UPDATE","UPMS_USER_DELETE","UPMS_ROLE_VIEW","UPMS_ROLE_CREATE","UPMS_ROLE_UPDATE","UPMS_ROLE_DELETE","UPMS_PERMISSION_VIEW","UPMS_PERMISSION_CREATE","UPMS_PERMISSION_UPDATE","UPMS_PERMISSION_DELETE","TOM_ORDER_VIEW","TOM_ORDER_CREATE","TOM_ORDER_UPDATE","TOM_ORDER_DELETE","FMS_VEHICLE_VIEW","FMS_VEHICLE_CREATE","FMS_VEHICLE_UPDATE","FMS_VEHICLE_DELETE"],createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"2",code:"UPMS_ADMIN",name:"UPMS 管理員",description:"UPMS 模組的管理員，可管理使用者、角色和權限",enabled:!0,permissionCodes:["UPMS_USER_VIEW","UPMS_USER_CREATE","UPMS_USER_UPDATE","UPMS_USER_DELETE","UPMS_ROLE_VIEW","UPMS_ROLE_CREATE","UPMS_ROLE_UPDATE","UPMS_ROLE_DELETE","UPMS_PERMISSION_VIEW","UPMS_PERMISSION_CREATE","UPMS_PERMISSION_UPDATE","UPMS_PERMISSION_DELETE"],createdTime:"2024-01-15T10:00:00+08:00",updatedTime:"2024-01-15T10:00:00+08:00"},{id:"3",code:"MANAGER",name:"營運經理",description:"負責日常營運管理的經理角色",enabled:!0,permissionCodes:["TOM_ORDER_VIEW","TOM_ORDER_CREATE","TOM_ORDER_UPDATE","TOM_ORDER_ASSIGN","FMS_VEHICLE_VIEW","FMS_VEHICLE_UPDATE"],createdTime:"2024-02-01T09:00:00+08:00",updatedTime:"2024-02-01T09:00:00+08:00"},{id:"4",code:"OPERATOR",name:"操作員",description:"一般操作人員，可查看和更新訂單",enabled:!0,permissionCodes:["TOM_ORDER_VIEW","TOM_ORDER_UPDATE","FMS_VEHICLE_VIEW"],createdTime:"2024-03-01T08:00:00+08:00",updatedTime:"2024-03-01T08:00:00+08:00"},{id:"5",code:"DRIVER",name:"司機",description:"司機角色，可查看分配的訂單和車輛資訊",enabled:!0,permissionCodes:["TOM_ORDER_VIEW","FMS_VEHICLE_VIEW"],createdTime:"2024-04-01T07:00:00+08:00",updatedTime:"2024-04-01T07:00:00+08:00"},{id:"6",code:"VIEWER",name:"查看者",description:"僅可查看資料的唯讀角色",enabled:!0,permissionCodes:["TOM_ORDER_VIEW","FMS_VEHICLE_VIEW","UPMS_USER_VIEW","UPMS_ROLE_VIEW"],createdTime:"2024-05-01T06:00:00+08:00",updatedTime:"2024-05-01T06:00:00+08:00"},{id:"7",code:"TOM_ADMIN",name:"TOM 管理員",description:"TOM 模組的管理員，可管理訂單相關功能",enabled:!0,permissionCodes:["TOM_ORDER_VIEW","TOM_ORDER_CREATE","TOM_ORDER_UPDATE","TOM_ORDER_DELETE","TOM_ORDER_ASSIGN","TOM_ORDER_REPORT"],createdTime:"2024-06-01T05:00:00+08:00",updatedTime:"2024-06-01T05:00:00+08:00"},{id:"8",code:"DISABLED_ROLE",name:"已停用角色",description:"已停用的測試角色",enabled:!1,permissionCodes:[],createdTime:"2024-07-01T04:00:00+08:00",updatedTime:"2024-12-01T04:00:00+08:00"}],S={1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[7]};async function P(E,n){if(o())return console.log("[Mock] 模擬創建角色",E),await new Promise(e=>setTimeout(e,500)),n==null||n("建立角色成功 (Mock)","success"),!0;try{const e=await _.post("/api/upms/roles",E);return console.log(e.data.data),n==null||n("建立角色成功","success"),!0}catch(e){return console.error(e),n==null||n("建立角色失敗，請稍後再試","danger"),!1}}async function I(E,n){var e;if(o()){console.log("[Mock] 使用 Mock 角色列表",E),await new Promise(i=>setTimeout(i,300));let a=[...t];if((e=E.keyword)!=null&&e.trim()){const i=E.keyword.toLowerCase();a=a.filter(c=>{var m,u;return c.code.toLowerCase().includes(i)||((m=c.name)==null?void 0:m.toLowerCase().includes(i))||((u=c.description)==null?void 0:u.toLowerCase().includes(i))})}const s=E.page||0,r=E.size||10,T=s*r,R=T+r,M=a.slice(T,R);return{content:M.map(d).map(i=>{var c;return{...i,permissionCount:((c=i.permissionCodes)==null?void 0:c.length)??0}}),totalElements:a.length,totalPages:Math.ceil(a.length/r),size:r,number:s,first:s===0,last:R>=a.length,empty:M.length===0}}try{const s=(await _.get("/api/upms/roles",{params:E})).data.data;return{...s,content:(s.content||[]).map(d)}}catch(a){return console.error(a),n==null||n("取得角色列表失敗，請稍後再試","danger"),{content:[],totalElements:0,totalPages:0,size:E.size,number:E.page,first:!0,last:!0,empty:!0}}}async function U(E,n){if(o()){console.log("[Mock] 使用 Mock 角色詳情",E),await new Promise(a=>setTimeout(a,200));const e=S[E];return e?d(e):null}try{const a=(await _.get(`/api/upms/roles/${E}`)).data.data;return d(a)}catch(e){return console.error(e),n==null||n("取得角色詳情失敗，請稍後再試","danger"),null}}async function D(E){var n;if(o())return console.log("[Mock] 使用 Mock 角色選項"),await new Promise(e=>setTimeout(e,200)),t.filter(e=>e.enabled).map(e=>({id:e.id,code:e.code,name:e.name}));try{const a=(n=(await _.get("/api/upms/roles/options")).data)==null?void 0:n.data;return Array.isArray(a)?a:[]}catch(e){return console.error(e),[]}}async function C(E,n,e){if(o())return console.log("[Mock] 模擬更新角色",E,n),await new Promise(a=>setTimeout(a,500)),e==null||e("更新角色成功 (Mock)","success"),!0;try{return await _.put(`/api/upms/roles/${E}`,n),e==null||e("更新角色成功","success"),!0}catch(a){return console.error(a),e==null||e("更新角色失敗，請稍後再試","danger"),!1}}async function L(E,n){if(o())return console.log("[Mock] 模擬刪除角色",E),await new Promise(e=>setTimeout(e,500)),n==null||n("刪除角色成功 (Mock)","success"),!0;try{return await _.delete(`/api/upms/roles/${E}`),n==null||n("刪除角色成功","success"),!0}catch(e){return console.error(e),n==null||n("刪除角色失敗，請稍後再試","danger"),!1}}export{t as M,U as a,D as b,P as c,L as d,I as f,C as u};
