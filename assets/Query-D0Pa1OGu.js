import{s,h as a}from"./index-BdFDZIEO.js";const n=[{id:"1",code:"UPMS_USER_VIEW",name:"查看使用者",systemCode:"UPMS",resourceCode:"USER",actionCode:"VIEW",enabled:!0,sortOrder:1,description:"允許查看使用者列表和詳情",groupKey:"USER",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"2",code:"UPMS_USER_CREATE",name:"建立使用者",systemCode:"UPMS",resourceCode:"USER",actionCode:"CREATE",enabled:!0,sortOrder:2,description:"允許建立新使用者",groupKey:"USER",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"3",code:"UPMS_USER_UPDATE",name:"更新使用者",systemCode:"UPMS",resourceCode:"USER",actionCode:"UPDATE",enabled:!0,sortOrder:3,description:"允許更新使用者資訊",groupKey:"USER",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"4",code:"UPMS_USER_DELETE",name:"刪除使用者",systemCode:"UPMS",resourceCode:"USER",actionCode:"DELETE",enabled:!0,sortOrder:4,description:"允許刪除使用者",groupKey:"USER",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"5",code:"UPMS_ROLE_VIEW",name:"查看角色",systemCode:"UPMS",resourceCode:"ROLE",actionCode:"VIEW",enabled:!0,sortOrder:5,description:"允許查看角色列表和詳情",groupKey:"ROLE",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"6",code:"UPMS_ROLE_CREATE",name:"建立角色",systemCode:"UPMS",resourceCode:"ROLE",actionCode:"CREATE",enabled:!0,sortOrder:6,description:"允許建立新角色",groupKey:"ROLE",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"7",code:"UPMS_ROLE_UPDATE",name:"更新角色",systemCode:"UPMS",resourceCode:"ROLE",actionCode:"UPDATE",enabled:!0,sortOrder:7,description:"允許更新角色資訊",groupKey:"ROLE",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"8",code:"UPMS_ROLE_DELETE",name:"刪除角色",systemCode:"UPMS",resourceCode:"ROLE",actionCode:"DELETE",enabled:!0,sortOrder:8,description:"允許刪除角色",groupKey:"ROLE",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"9",code:"UPMS_PERMISSION_VIEW",name:"查看權限",systemCode:"UPMS",resourceCode:"PERMISSION",actionCode:"VIEW",enabled:!0,sortOrder:9,description:"允許查看權限列表和詳情",groupKey:"PERMISSION",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"10",code:"UPMS_PERMISSION_CREATE",name:"建立權限",systemCode:"UPMS",resourceCode:"PERMISSION",actionCode:"CREATE",enabled:!0,sortOrder:10,description:"允許建立新權限",groupKey:"PERMISSION",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"11",code:"UPMS_PERMISSION_UPDATE",name:"更新權限",systemCode:"UPMS",resourceCode:"PERMISSION",actionCode:"UPDATE",enabled:!0,sortOrder:11,description:"允許更新權限資訊",groupKey:"PERMISSION",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"12",code:"UPMS_PERMISSION_DELETE",name:"刪除權限",systemCode:"UPMS",resourceCode:"PERMISSION",actionCode:"DELETE",enabled:!0,sortOrder:12,description:"允許刪除權限",groupKey:"PERMISSION",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"13",code:"UPMS_SYSTEM_VIEW",name:"查看系統",systemCode:"UPMS",resourceCode:"SYSTEM",actionCode:"VIEW",enabled:!0,sortOrder:13,description:"允許查看系統列表和詳情",groupKey:"SYSTEM",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"14",code:"UPMS_SYSTEM_CREATE",name:"建立系統",systemCode:"UPMS",resourceCode:"SYSTEM",actionCode:"CREATE",enabled:!0,sortOrder:14,description:"允許建立新系統",groupKey:"SYSTEM",createdTime:"2024-01-01T00:00:00+08:00",updatedTime:"2024-01-01T00:00:00+08:00"},{id:"15",code:"TOM_ORDER_VIEW",name:"查看訂單",systemCode:"TOM",resourceCode:"ORDER",actionCode:"VIEW",enabled:!0,sortOrder:15,description:"允許查看訂單列表和詳情",groupKey:"ORDER",createdTime:"2024-02-01T00:00:00+08:00",updatedTime:"2024-02-01T00:00:00+08:00"},{id:"16",code:"TOM_ORDER_CREATE",name:"建立訂單",systemCode:"TOM",resourceCode:"ORDER",actionCode:"CREATE",enabled:!0,sortOrder:16,description:"允許建立新訂單",groupKey:"ORDER",createdTime:"2024-02-01T00:00:00+08:00",updatedTime:"2024-02-01T00:00:00+08:00"},{id:"17",code:"TOM_ORDER_UPDATE",name:"更新訂單",systemCode:"TOM",resourceCode:"ORDER",actionCode:"UPDATE",enabled:!0,sortOrder:17,description:"允許更新訂單資訊",groupKey:"ORDER",createdTime:"2024-02-01T00:00:00+08:00",updatedTime:"2024-02-01T00:00:00+08:00"},{id:"18",code:"TOM_ORDER_DELETE",name:"刪除訂單",systemCode:"TOM",resourceCode:"ORDER",actionCode:"DELETE",enabled:!0,sortOrder:18,description:"允許刪除訂單",groupKey:"ORDER",createdTime:"2024-02-01T00:00:00+08:00",updatedTime:"2024-02-01T00:00:00+08:00"},{id:"19",code:"TOM_ORDER_ASSIGN",name:"分配訂單",systemCode:"TOM",resourceCode:"ORDER",actionCode:"ASSIGN",enabled:!0,sortOrder:19,description:"允許分配訂單給司機",groupKey:"ORDER",createdTime:"2024-02-01T00:00:00+08:00",updatedTime:"2024-02-01T00:00:00+08:00"},{id:"20",code:"FMS_VEHICLE_VIEW",name:"查看車輛",systemCode:"FMS",resourceCode:"VEHICLE",actionCode:"VIEW",enabled:!0,sortOrder:20,description:"允許查看車輛列表和詳情",groupKey:"VEHICLE",createdTime:"2024-03-01T00:00:00+08:00",updatedTime:"2024-03-01T00:00:00+08:00"},{id:"21",code:"FMS_VEHICLE_CREATE",name:"建立車輛",systemCode:"FMS",resourceCode:"VEHICLE",actionCode:"CREATE",enabled:!0,sortOrder:21,description:"允許建立新車輛",groupKey:"VEHICLE",createdTime:"2024-03-01T00:00:00+08:00",updatedTime:"2024-03-01T00:00:00+08:00"},{id:"22",code:"FMS_VEHICLE_UPDATE",name:"更新車輛",systemCode:"FMS",resourceCode:"VEHICLE",actionCode:"UPDATE",enabled:!0,sortOrder:22,description:"允許更新車輛資訊",groupKey:"VEHICLE",createdTime:"2024-03-01T00:00:00+08:00",updatedTime:"2024-03-01T00:00:00+08:00"},{id:"23",code:"UPMS_USER_EXPORT",name:"匯出使用者",systemCode:"UPMS",resourceCode:"USER",actionCode:"EXPORT",enabled:!1,sortOrder:23,description:"允許匯出使用者資料（已停用）",groupKey:"USER",createdTime:"2024-01-15T00:00:00+08:00",updatedTime:"2024-01-20T00:00:00+08:00"},{id:"24",code:"TOM_ORDER_EXPORT",name:"匯出訂單",systemCode:"TOM",resourceCode:"ORDER",actionCode:"EXPORT",enabled:!1,sortOrder:24,description:"允許匯出訂單資料（已停用）",groupKey:"ORDER",createdTime:"2024-02-15T00:00:00+08:00",updatedTime:"2024-02-20T00:00:00+08:00"}],T={};n.forEach(e=>{T[e.id]={id:e.id,code:e.code,name:e.name,description:e.description,systemCode:e.systemCode,resourceCode:e.resourceCode,actionCode:e.actionCode,enabled:e.enabled,sortOrder:e.sortOrder,groupKey:e.groupKey,createdTime:e.createdTime,updatedTime:e.updatedTime}});let R=100;function M(){return String(R++)}const u="/api/upms/permissions";async function p(e,d){if(s()){console.log("[Mock] 模擬建立權限",e),await new Promise(r=>setTimeout(r,500));const t={id:M(),code:e.systemCode+"_"+e.resourceCode+"_"+e.actionCode,name:e.name,systemCode:e.systemCode,resourceCode:e.resourceCode,actionCode:e.actionCode,enabled:e.enabled??!0,sortOrder:e.sortOrder,description:e.description,groupKey:e.resourceCode,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()};return n.push(t),T[t.id]={...t},d==null||d("建立權限成功 (Mock)","success"),!0}try{return await a.post(u,e),d==null||d("建立權限成功","success"),!0}catch(t){return console.error(t),d==null||d("建立權限失敗，請稍後再試","danger"),!1}}async function I(e,d){if(s()){console.log("[Mock] 使用 Mock 權限列表",e),await new Promise(i=>setTimeout(i,300));let t=[...n];if(e.keyword){const i=e.keyword.toLowerCase();t=t.filter(E=>{var S;return E.code.toLowerCase().includes(i)||E.name.toLowerCase().includes(i)||((S=E.description)==null?void 0:S.toLowerCase().includes(i))})}e.systemCode&&(t=t.filter(i=>i.systemCode===e.systemCode)),e.enabled!==void 0&&(t=t.filter(i=>i.enabled===e.enabled));const r=e.page||0,o=e.size||10,c=r*o,O=c+o,m=t.slice(c,O),C=Math.ceil(t.length/o);return{content:m,totalElements:t.length,totalPages:C,size:o,number:r,first:r===0,last:r>=C-1,empty:m.length===0}}try{const r=(await a.get(u,{params:e})).data.data;return{...r,content:r.content||[]}}catch(t){return console.error(t),d==null||d("取得權限列表失敗，請稍後再試","danger"),{content:[],totalElements:0,totalPages:0,size:e.size,number:e.page,first:!0,last:!0,empty:!0}}}async function U(e,d){if(s()){console.log("[Mock] 使用 Mock 權限詳情",e),await new Promise(o=>setTimeout(o,300));const t=T[e];if(t)return t;const r=n.find(o=>o.id===e);if(r)return{id:r.id,code:r.code,name:r.name,description:r.description,systemCode:r.systemCode,resourceCode:r.resourceCode,actionCode:r.actionCode,enabled:r.enabled,sortOrder:r.sortOrder,groupKey:r.groupKey,createdTime:r.createdTime,updatedTime:r.updatedTime};throw new Error("Permission not found")}try{return(await a.get(`${u}/${e}`)).data.data}catch(t){throw console.error(t),t}}async function f(e,d,t){if(s()){console.log("[Mock] 模擬更新權限",e,d),await new Promise(c=>setTimeout(c,500));const r=n.find(c=>c.id===e),o=T[e];return r&&(d.name!==void 0&&(r.name=d.name),d.description!==void 0&&(r.description=d.description),d.enabled!==void 0&&(r.enabled=d.enabled),d.sortOrder!==void 0&&(r.sortOrder=d.sortOrder),r.updatedTime=new Date().toISOString()),o?(d.name!==void 0&&(o.name=d.name),d.description!==void 0&&(o.description=d.description),d.enabled!==void 0&&(o.enabled=d.enabled),d.sortOrder!==void 0&&(o.sortOrder=d.sortOrder),o.updatedTime=new Date().toISOString(),{...o}):null}try{const r=await a.patch(`${u}/${e}`,d);return t==null||t("更新權限成功","success"),r.data.data}catch(r){throw console.error(r),r}}async function g(e,d){if(s()){console.log("[Mock] 模擬刪除權限",e),await new Promise(r=>setTimeout(r,500));const t=n.findIndex(r=>r.id===e);return t>=0&&n.splice(t,1),delete T[e],d==null||d("刪除權限成功 (Mock)","success"),!0}try{return await a.delete(`${u}/${e}`),d==null||d("刪除權限成功","success"),!0}catch(t){return console.error(t),d==null||d("刪除權限失敗，請稍後再試","danger"),!1}}export{U as a,p as c,g as d,I as f,f as u};
